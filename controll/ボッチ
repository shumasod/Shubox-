import React, { useState, useEffect, useCallback } from 'react';
import { Users, MessageCircle, Target, Timer, Shuffle, ChevronRight, Star, Trophy, RefreshCw, Heart, Zap, Coffee, Code, Terminal, Database, Cloud, Cpu } from 'lucide-react';

const topics = [
  { 
    category: 'æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯', 
    icon: 'ğŸ’»',
    questions: [
      'ãƒ¡ã‚¤ãƒ³ã§ä½¿ã£ã¦ã„ã‚‹è¨€èªã¯ä½•ã§ã™ã‹ï¼Ÿ',
      'ã‚¨ãƒ‡ã‚£ã‚¿/IDEä½•ä½¿ã£ã¦ã¾ã™ï¼Ÿ',
      'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ´¾ï¼Ÿãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ´¾ï¼Ÿ',
      'æœ€è¿‘è§¦ã£ã¦é¢ç™½ã‹ã£ãŸæŠ€è¡“ã¯ï¼Ÿ',
      'AWSæ´¾ï¼ŸGCPæ´¾ï¼ŸAzureæ´¾ï¼Ÿ',
      'Dockerä½¿ã£ã¦ã¾ã™ï¼ŸKubernetesè§¦ã£ã¦ã¾ã™ï¼Ÿ',
      'TypeScriptæ´¾ï¼ŸJavaScriptæ´¾ï¼Ÿ',
      'ã©ã‚“ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä½¿ã£ã¦ã¾ã™ï¼Ÿ',
      'CI/CDã¯ä½•ä½¿ã£ã¦ã¾ã™ï¼Ÿ',
      'ãƒ†ã‚¹ãƒˆã©ã®ãã‚‰ã„æ›¸ã„ã¦ã¾ã™ï¼Ÿ'
    ] 
  },
  { 
    category: 'ã‚­ãƒ£ãƒªã‚¢', 
    icon: 'ğŸš€',
    questions: [
      'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ­´ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ',
      'ã©ã‚“ãªçµŒç·¯ã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã‚Šã¾ã—ãŸï¼Ÿ',
      'å‰è·ã¯ä½•ã‚’ã•ã‚Œã¦ã¾ã—ãŸã‹ï¼Ÿ',
      'SIerå‡ºèº«ï¼ŸWebç³»å‡ºèº«ï¼Ÿ',
      'ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã«èˆˆå‘³ã‚ã‚Šã¾ã™ï¼Ÿ',
      'ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—çµŒé¨“ã‚ã‚Šã¾ã™ï¼Ÿ',
      'å‰¯æ¥­ã‚„ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã—ã¦ã¾ã™ï¼Ÿ',
      'æŠ€è¡“ãƒ–ãƒ­ã‚°æ›¸ã„ã¦ã¾ã™ï¼Ÿ',
      'OSSæ´»å‹•ã—ã¦ã¾ã™ï¼Ÿ',
      'è»¢è·ä½•å›ãã‚‰ã„ã—ã¦ã¾ã™ï¼Ÿ'
    ] 
  },
  { 
    category: 'é–‹ç™ºã‚ã‚‹ã‚ã‚‹', 
    icon: 'ğŸ”¥',
    questions: [
      'æœ¬ç•ªç’°å¢ƒã§ã‚„ã‚‰ã‹ã—ãŸã“ã¨ã‚ã‚Šã¾ã™ï¼Ÿ',
      'ä¸€ç•ªé•·ã„ãƒ‡ãƒãƒƒã‚°ä½•æ™‚é–“ã§ã—ãŸï¼Ÿ',
      'ç· ã‚åˆ‡ã‚Šå‰ã®ä¿®ç¾…å ´ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã¯ï¼Ÿ',
      'ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ä¸€ç•ªå­¦ã‚“ã ã“ã¨ã¯ï¼Ÿ',
      'ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰ã¨æˆ¦ã£ãŸè©±ã‚ã‚Šã¾ã™ï¼Ÿ',
      'ã€Œå‹•ãã‹ã‚‰ãƒ¨ã‚·ï¼ã€æ´¾ï¼Ÿãƒªãƒ•ã‚¡ã‚¯ã‚¿æ´¾ï¼Ÿ',
      'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›¸ãæ´¾ï¼Ÿæ›¸ã‹ãªã„æ´¾ï¼Ÿ',
      'ãƒšã‚¢ãƒ—ãƒ­/ãƒ¢ãƒ–ãƒ—ãƒ­ã—ã¦ã¾ã™ï¼Ÿ',
      'ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å³ã—ã‚ï¼Ÿå„ªã—ã‚ï¼Ÿ',
      'æŠ€è¡“çš„è² å‚µã©ã†å‘ãåˆã£ã¦ã¾ã™ï¼Ÿ'
    ] 
  },
  { 
    category: 'åƒãæ–¹', 
    icon: 'ğŸ ',
    questions: [
      'ãƒ•ãƒ«ãƒªãƒ¢ãƒ¼ãƒˆï¼Ÿå‡ºç¤¾ï¼Ÿãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼Ÿ',
      'æœå‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼Ÿå¤œå‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼Ÿ',
      'é›†ä¸­ã™ã‚‹ã¨ãã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã¯ï¼Ÿ',
      'ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°å¤šã„æ´¾ï¼Ÿå°‘ãªã„æ´¾ï¼Ÿ',
      'Slacké€šçŸ¥ã©ã†ç®¡ç†ã—ã¦ã¾ã™ï¼Ÿ',
      '1on1ã£ã¦ã©ã‚“ãªæ„Ÿã˜ã§ã‚„ã£ã¦ã¾ã™ï¼Ÿ',
      'ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ï¼Ÿã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ï¼Ÿ',
      'ã‚¿ã‚¹ã‚¯ç®¡ç†ä½•ä½¿ã£ã¦ã¾ã™ï¼Ÿ',
      'è¦‹ç©ã‚‚ã‚Šå¾—æ„ã§ã™ã‹ï¼Ÿ',
      'ãƒãƒ¼ãƒ ä½•äººãã‚‰ã„ã§ã™ã‹ï¼Ÿ'
    ] 
  },
  { 
    category: 'å­¦ç¿’ãƒ»æˆé•·', 
    icon: 'ğŸ“š',
    questions: [
      'æœ€è¿‘èª­ã‚“ã§è‰¯ã‹ã£ãŸæŠ€è¡“æ›¸ã¯ï¼Ÿ',
      'å‹‰å¼·ä¼šã‚„ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹è¡Œãã¾ã™ï¼Ÿ',
      'è³‡æ ¼ã£ã¦å–ã£ã¦ã¾ã™ï¼Ÿ',
      'Udemyæ´¾ï¼Ÿæ›¸ç±æ´¾ï¼Ÿå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ´¾ï¼Ÿ',
      'æ–°ã—ã„æŠ€è¡“ã®ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã©ã†ã—ã¦ã¾ã™ï¼Ÿ',
      'å€‹äººé–‹ç™ºã—ã¦ã¾ã™ï¼Ÿ',
      'æŠ€è¡“æƒ…å ±ã©ã“ã§åé›†ã—ã¦ã¾ã™ï¼Ÿ',
      'ãƒ¡ãƒ³ã‚¿ãƒ¼ã„ã¾ã™ï¼Ÿãƒ¡ãƒ³ãƒ†ã‚£ãƒ¼ã„ã¾ã™ï¼Ÿ',
      'è‹±èªã©ã®ãã‚‰ã„ä½¿ã„ã¾ã™ï¼Ÿ',
      'ChatGPT/Copilotæ´»ç”¨ã—ã¦ã¾ã™ï¼Ÿ'
    ] 
  },
  { 
    category: 'ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ', 
    icon: 'ğŸ®',
    questions: [
      'è¶£å‘³ã§ã‚‚ã‚³ãƒ¼ãƒ‰æ›¸ãã¾ã™ï¼Ÿ',
      'ã‚²ãƒ¼ãƒ ä½•ã‚„ã£ã¦ã¾ã™ï¼Ÿ',
      'è‡ªä½œã‚­ãƒ¼ãƒœãƒ¼ãƒ‰èˆˆå‘³ã‚ã‚Šã¾ã™ï¼Ÿ',
      'ãƒ‡ã‚¹ã‚¯ç’°å¢ƒã“ã ã‚ã£ã¦ã¾ã™ï¼Ÿ',
      'ãƒ¢ãƒ‹ã‚¿ãƒ¼ä½•æšæ´¾ï¼Ÿ',
      'æ©Ÿæ¢°å¼ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ´¾ï¼Ÿ',
      'ä¼‘æ—¥ä½•ã—ã¦ã¾ã™ï¼Ÿ',
      'ã‚¤ãƒ³ãƒ‰ã‚¢æ´¾ï¼Ÿã‚¢ã‚¦ãƒˆãƒ‰ã‚¢æ´¾ï¼Ÿ',
      'é‹å‹•ç¿’æ…£ã‚ã‚Šã¾ã™ï¼Ÿ',
      'ã‚¨ãƒŠã‚¸ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯æ´¾ï¼Ÿã‚³ãƒ¼ãƒ’ãƒ¼æ´¾ï¼Ÿ'
    ] 
  },
];

const missions = [
  { id: 1, text: 'åŒã˜è¨€èªã‚’ä½¿ã£ã¦ã„ã‚‹äººã‚’è¦‹ã¤ã‘ã‚‹', points: 10, icon: 'ğŸ‘¨â€ğŸ’»' },
  { id: 2, text: 'æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã«ã¤ã„ã¦3åˆ†ä»¥ä¸Šè©±ã™', points: 15, icon: 'ğŸ”¥' },
  { id: 3, text: 'GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’äº¤æ›ã™ã‚‹', points: 20, icon: 'ğŸ™' },
  { id: 4, text: 'ç›¸æ‰‹ã®ãŠã™ã™ã‚æŠ€è¡“æ›¸ã‚’èã', points: 10, icon: 'ğŸ“š' },
  { id: 5, text: 'Twitter/Xã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’äº¤æ›ã™ã‚‹', points: 15, icon: 'ğŸ¦' },
  { id: 6, text: 'ç›¸æ‰‹ã®æœ¬ç•ªéšœå®³ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’èã', points: 20, icon: 'ğŸ’¥' },
  { id: 7, text: 'è»¢è·/ã‚­ãƒ£ãƒªã‚¢ã®è©±ã‚’ã™ã‚‹', points: 15, icon: 'ğŸš€' },
  { id: 8, text: 'æ¬¡ã®å‹‰å¼·ä¼šã®ç´„æŸã‚’ã™ã‚‹', points: 25, icon: 'ğŸ“…' },
  { id: 9, text: 'LTç™»å£‡çµŒé¨“è€…ã¨è©±ã™', points: 15, icon: 'ğŸ¤' },
  { id: 10, text: 'é•ã†æŠ€è¡“é ˜åŸŸã®äººã¨è©±ã™', points: 20, icon: 'ğŸŒ' },
  { id: 11, text: 'ç›¸æ‰‹ã«OSSã‚’ç´¹ä»‹ã—ã¦ã‚‚ã‚‰ã†', points: 15, icon: 'â­' },
  { id: 12, text: 'æŠ€è¡“ã®æ„šç—´ã§ç››ã‚Šä¸ŠãŒã‚‹', points: 10, icon: 'ğŸ˜¤' },
];

const iceBreakers = [
  'ä»Šæ—¥ã®ã‚¤ãƒ™ãƒ³ãƒˆã€ã©ã‚“ãªçµŒç·¯ã§å‚åŠ ã•ã‚Œã¾ã—ãŸï¼Ÿ',
  'æ™®æ®µã©ã‚“ãªæŠ€è¡“ä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿ',
  'ãŠä»•äº‹ã¯ã©ã‚“ãªé ˜åŸŸã§ã™ã‹ï¼Ÿ',
  'æœ€è¿‘é¢ç™½ã‹ã£ãŸæŠ€è¡“ã£ã¦ã‚ã‚Šã¾ã™ï¼Ÿ',
  'ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã•ã‚Œã¦ã¾ã™ã‹ï¼Ÿ',
  'ã“ã®è¾ºã®å‹‰å¼·ä¼šã‚ˆãæ¥ã‚‰ã‚Œã¾ã™ï¼Ÿ',
  'ä»Šæ—¥ã®ç™ºè¡¨ã§æ°—ã«ãªã£ãŸã®ã‚ã‚Šã¾ã—ãŸï¼Ÿ',
  'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ­´ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ',
];

const techDebates = [
  { topic: 'ã‚¹ãƒšãƒ¼ã‚¹ vs ã‚¿ãƒ–', optionA: 'ã‚¹ãƒšãƒ¼ã‚¹æ´¾', optionB: 'ã‚¿ãƒ–æ´¾' },
  { topic: 'Vim vs Emacs vs VSCode', optionA: 'Vimæ´¾', optionB: 'VSCodeæ´¾' },
  { topic: 'Mac vs Windows vs Linux', optionA: 'Macæ´¾', optionB: 'Linuxæ´¾' },
  { topic: 'ãƒ¢ãƒãƒªã‚¹ vs ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹', optionA: 'ãƒ¢ãƒãƒªã‚¹æ´¾', optionB: 'ãƒã‚¤ã‚¯ãƒ­æ´¾' },
  { topic: 'REST vs GraphQL', optionA: 'RESTæ´¾', optionB: 'GraphQLæ´¾' },
  { topic: 'SQL vs NoSQL', optionA: 'SQLæ´¾', optionB: 'NoSQLæ´¾' },
  { topic: 'OOP vs é–¢æ•°å‹', optionA: 'OOPæ´¾', optionB: 'é–¢æ•°å‹æ´¾' },
  { topic: 'é™çš„å‹ä»˜ã‘ vs å‹•çš„å‹ä»˜ã‘', optionA: 'é™çš„æ´¾', optionB: 'å‹•çš„æ´¾' },
  { topic: 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ vs ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰', optionA: 'ãƒ•ãƒ­ãƒ³ãƒˆæ´¾', optionB: 'ãƒãƒƒã‚¯æ´¾' },
  { topic: 'æ–°æŠ€è¡“ vs æ¯ã‚ŒãŸæŠ€è¡“', optionA: 'æ–°æŠ€è¡“æ´¾', optionB: 'æ¯ã‚ŒãŸæŠ€è¡“æ´¾' },
];

export default function EngineerBocchiBreaker() {
  const [activeTab, setActiveTab] = useState('home');
  const [currentTopic, setCurrentTopic] = useState(null);
  const [currentMission, setCurrentMission] = useState(null);
  const [completedMissions, setCompletedMissions] = useState([]);
  const [score, setScore] = useState(0);
  const [timerActive, setTimerActive] = useState(false);
  const [timeLeft, setTimeLeft] = useState(180);
  const [timerDuration, setTimerDuration] = useState(180);
  const [showIceBreaker, setShowIceBreaker] = useState(false);
  const [currentIceBreaker, setCurrentIceBreaker] = useState('');
  const [conversationCount, setConversationCount] = useState(0);
  const [currentDebate, setCurrentDebate] = useState(null);
  const [showDebate, setShowDebate] = useState(false);

  useEffect(() => {
    let interval;
    if (timerActive && timeLeft > 0) {
      interval = setInterval(() => {
        setTimeLeft((prev) => prev - 1);
      }, 1000);
    } else if (timeLeft === 0) {
      setTimerActive(false);
      setConversationCount((prev) => prev + 1);
    }
    return () => clearInterval(interval);
  }, [timerActive, timeLeft]);

  const getRandomTopic = useCallback(() => {
    const categoryIndex = Math.floor(Math.random() * topics.length);
    const category = topics[categoryIndex];
    const questionIndex = Math.floor(Math.random() * category.questions.length);
    setCurrentTopic({
      category: category.category,
      icon: category.icon,
      question: category.questions[questionIndex],
    });
  }, []);

  const getRandomMission = useCallback(() => {
    const availableMissions = missions.filter(
      (m) => !completedMissions.includes(m.id)
    );
    if (availableMissions.length > 0) {
      const randomIndex = Math.floor(Math.random() * availableMissions.length);
      setCurrentMission(availableMissions[randomIndex]);
    } else {
      setCurrentMission(null);
    }
  }, [completedMissions]);

  const completeMission = () => {
    if (currentMission) {
      setCompletedMissions([...completedMissions, currentMission.id]);
      setScore(score + currentMission.points);
      getRandomMission();
    }
  };

  const startTimer = () => {
    setTimeLeft(timerDuration);
    setTimerActive(true);
  };

  const resetTimer = () => {
    setTimerActive(false);
    setTimeLeft(timerDuration);
  };

  const getRandomIceBreaker = () => {
    const randomIndex = Math.floor(Math.random() * iceBreakers.length);
    setCurrentIceBreaker(iceBreakers[randomIndex]);
    setShowIceBreaker(true);
  };

  const getRandomDebate = () => {
    const randomIndex = Math.floor(Math.random() * techDebates.length);
    setCurrentDebate(techDebates[randomIndex]);
    setShowDebate(true);
  };

  const formatTime = (seconds) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  };

  const getLevel = () => {
    if (score >= 150) return { name: 'ç¥ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', color: 'text-yellow-500', icon: 'ğŸ‘‘' };
    if (score >= 100) return { name: 'ã‚·ãƒ‹ã‚¢ã‚³ãƒŸãƒ¥åŠ›', color: 'text-purple-500', icon: 'â­' };
    if (score >= 50) return { name: 'ãƒŸãƒ‰ãƒ«ã‚³ãƒŸãƒ¥åŠ›', color: 'text-blue-500', icon: 'ğŸš€' };
    if (score >= 20) return { name: 'ã‚¸ãƒ¥ãƒ‹ã‚¢ã‚³ãƒŸãƒ¥åŠ›', color: 'text-green-500', icon: 'ğŸŒ±' };
    return { name: 'ã‚³ãƒŸãƒ¥åŠ›ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³', color: 'text-gray-500', icon: 'ğŸ£' };
  };

  const TabButton = ({ id, icon: Icon, label }) => (
    <button
      onClick={() => setActiveTab(id)}
      className={`flex flex-col items-center p-2 flex-1 transition-all ${
        activeTab === id
          ? 'text-emerald-600 border-b-2 border-emerald-600'
          : 'text-gray-400 hover:text-gray-600'
      }`}
    >
      <Icon size={20} />
      <span className="text-xs mt-1">{label}</span>
    </button>
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900">
      <div className="max-w-md mx-auto bg-gray-900 min-h-screen shadow-xl border-x border-gray-700">
        {/* Header */}
        <div className="bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-4">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-xl font-bold flex items-center gap-2">
                <Terminal className="text-emerald-200" size={24} />
                ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¼ã£ã¡Breaker
              </h1>
              <p className="text-emerald-200 text-sm font-mono">// æ‡‡è¦ªä¼šã‚’ãƒ‡ãƒãƒƒã‚°ã—ã‚ˆã†</p>
            </div>
            <div className="text-right">
              <div className="flex items-center gap-1">
                <span className="text-lg">{getLevel().icon}</span>
                <span className="font-bold font-mono">{score} pt</span>
              </div>
              <p className={`text-xs ${getLevel().color}`}>{getLevel().name}</p>
            </div>
          </div>
        </div>

        {/* Content */}
        <div className="p-4 pb-20">
          {activeTab === 'home' && (
            <div className="space-y-4">
              {/* Stats */}
              <div className="grid grid-cols-3 gap-3">
                <div className="bg-gray-800 border border-gray-700 rounded-xl p-3 text-center">
                  <Users className="mx-auto text-emerald-400 mb-1" size={24} />
                  <p className="text-2xl font-bold text-white font-mono">{conversationCount}</p>
                  <p className="text-xs text-gray-400">ä¼šè©±ã—ãŸäºº</p>
                </div>
                <div className="bg-gray-800 border border-gray-700 rounded-xl p-3 text-center">
                  <Target className="mx-auto text-amber-400 mb-1" size={24} />
                  <p className="text-2xl font-bold text-white font-mono">{completedMissions.length}</p>
                  <p className="text-xs text-gray-400">é”æˆãƒŸãƒƒã‚·ãƒ§ãƒ³</p>
                </div>
                <div className="bg-gray-800 border border-gray-700 rounded-xl p-3 text-center">
                  <Trophy className="mx-auto text-purple-400 mb-1" size={24} />
                  <p className="text-2xl font-bold text-white font-mono">{score}</p>
                  <p className="text-xs text-gray-400">ã‚¹ã‚³ã‚¢</p>
                </div>
              </div>

              {/* Quick Actions */}
              <div className="space-y-3">
                <button
                  onClick={getRandomIceBreaker}
                  className="w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-xl p-4 flex items-center justify-between shadow-lg hover:shadow-emerald-500/20 transition-all"
                >
                  <div className="flex items-center gap-3">
                    <Coffee className="text-emerald-200" size={28} />
                    <div className="text-left">
                      <p className="font-bold">è©±ã—ã‹ã‘ã‚‹ãã£ã‹ã‘</p>
                      <p className="text-emerald-200 text-sm">console.log("ã“ã‚“ã«ã¡ã¯")</p>
                    </div>
                  </div>
                  <ChevronRight />
                </button>

                <button
                  onClick={() => { getRandomTopic(); setActiveTab('topics'); }}
                  className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl p-4 flex items-center justify-between shadow-lg hover:shadow-blue-500/20 transition-all"
                >
                  <div className="flex items-center gap-3">
                    <Code className="text-blue-200" size={28} />
                    <div className="text-left">
                      <p className="font-bold">æŠ€è¡“ãƒˆãƒ¼ã‚¯ã‚«ãƒ¼ãƒ‰</p>
                      <p className="text-blue-200 text-sm">ãƒ©ãƒ³ãƒ€ãƒ ã§è©±é¡Œã‚’ç”Ÿæˆ</p>
                    </div>
                  </div>
                  <ChevronRight />
                </button>

                <button
                  onClick={getRandomDebate}
                  className="w-full bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-xl p-4 flex items-center justify-between shadow-lg hover:shadow-orange-500/20 transition-all"
                >
                  <div className="flex items-center gap-3">
                    <Zap className="text-orange-200" size={28} />
                    <div className="text-left">
                      <p className="font-bold">æŠ€è¡“è«–äº‰ã‚¬ãƒãƒ£</p>
                      <p className="text-orange-200 text-sm">ã‚ãªãŸã¯ã©ã£ã¡æ´¾ï¼Ÿ</p>
                    </div>
                  </div>
                  <ChevronRight />
                </button>

                <button
                  onClick={() => { getRandomMission(); setActiveTab('mission'); }}
                  className="w-full bg-gradient-to-r from-amber-600 to-yellow-600 text-white rounded-xl p-4 flex items-center justify-between shadow-lg hover:shadow-amber-500/20 transition-all"
                >
                  <div className="flex items-center gap-3">
                    <Target className="text-amber-200" size={28} />
                    <div className="text-left">
                      <p className="font-bold">ãƒŸãƒƒã‚·ãƒ§ãƒ³ã«æŒ‘æˆ¦</p>
                      <p className="text-amber-200 text-sm">å®Ÿç¸¾ã‚’è§£é™¤ã—ã‚ˆã†</p>
                    </div>
                  </div>
                  <ChevronRight />
                </button>
              </div>

              {/* Ice Breaker Modal */}
              {showIceBreaker && (
                <div className="fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50">
                  <div className="bg-gray-800 border border-gray-600 rounded-2xl p-6 max-w-sm w-full">
                    <div className="text-center">
                      <div className="w-16 h-16 bg-emerald-900/50 rounded-full flex items-center justify-center mx-auto mb-4">
                        <Terminal className="text-emerald-400" size={32} />
                      </div>
                      <h3 className="text-lg font-bold text-white mb-2">å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰</h3>
                      <div className="bg-gray-900 rounded-xl p-4 text-left font-mono text-sm">
                        <p className="text-gray-500">$ speak --init</p>
                        <p className="text-emerald-400 mt-2">"{currentIceBreaker}"</p>
                      </div>
                      <div className="flex gap-2 mt-4">
                        <button
                          onClick={getRandomIceBreaker}
                          className="flex-1 bg-gray-700 text-gray-200 rounded-xl py-3 font-medium flex items-center justify-center gap-2 hover:bg-gray-600"
                        >
                          <RefreshCw size={18} /> å†ç”Ÿæˆ
                        </button>
                        <button
                          onClick={() => setShowIceBreaker(false)}
                          className="flex-1 bg-emerald-600 text-white rounded-xl py-3 font-medium hover:bg-emerald-500"
                        >
                          å®Ÿè¡Œã™ã‚‹
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Tech Debate Modal */}
              {showDebate && currentDebate && (
                <div className="fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50">
                  <div className="bg-gray-800 border border-gray-600 rounded-2xl p-6 max-w-sm w-full">
                    <div className="text-center">
                      <div className="text-4xl mb-3">âš”ï¸</div>
                      <h3 className="text-lg font-bold text-white mb-4">{currentDebate.topic}</h3>
                      <div className="flex gap-3 mb-4">
                        <div className="flex-1 bg-blue-900/50 border border-blue-500 rounded-xl p-4">
                          <p className="text-blue-400 font-bold">{currentDebate.optionA}</p>
                        </div>
                        <div className="flex items-center text-gray-500 font-bold">VS</div>
                        <div className="flex-1 bg-red-900/50 border border-red-500 rounded-xl p-4">
                          <p className="text-red-400 font-bold">{currentDebate.optionB}</p>
                        </div>
                      </div>
                      <p className="text-gray-400 text-sm mb-4">
                        ç›¸æ‰‹ã«èã„ã¦ã¿ã‚ˆã†ï¼æ„å¤–ãªå…±é€šç‚¹ã‚„é•ã„ãŒè¦‹ã¤ã‹ã‚‹ã‹ã‚‚
                      </p>
                      <div className="flex gap-2">
                        <button
                          onClick={getRandomDebate}
                          className="flex-1 bg-gray-700 text-gray-200 rounded-xl py-3 font-medium flex items-center justify-center gap-2 hover:bg-gray-600"
                        >
                          <RefreshCw size={18} /> åˆ¥ã®ãŠé¡Œ
                        </button>
                        <button
                          onClick={() => setShowDebate(false)}
                          className="flex-1 bg-orange-600 text-white rounded-xl py-3 font-medium hover:bg-orange-500"
                        >
                          èã„ã¦ãã‚‹ï¼
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Tips */}
              <div className="bg-gray-800 border border-gray-700 rounded-xl p-4">
                <h3 className="font-bold text-emerald-400 flex items-center gap-2 mb-2 font-mono">
                  <span className="text-gray-500">//</span> ä»Šæ—¥ã®Tips
                </h3>
                <p className="text-gray-300 text-sm">
                  ã€Œã©ã‚“ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿã€ã¯æœ€å¼·ã®ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ã€‚åŒã˜è¨€èªä½¿ã„ãŒè¦‹ã¤ã‹ã‚‹ã¨ä¸€æ°—ã«ç››ã‚Šä¸ŠãŒã‚‹ï¼
                </p>
              </div>
            </div>
          )}

          {activeTab === 'topics' && (
            <div className="space-y-4">
              <h2 className="text-lg font-bold text-white font-mono flex items-center gap-2">
                <Code size={20} className="text-emerald-400" />
                æŠ€è¡“ãƒˆãƒ¼ã‚¯ã‚«ãƒ¼ãƒ‰
              </h2>
              
              {currentTopic ? (
                <div className="bg-gradient-to-br from-gray-800 to-gray-900 border border-emerald-500/50 rounded-2xl p-6 shadow-lg shadow-emerald-500/10">
                  <div className="flex items-center gap-2 mb-3">
                    <span className="text-2xl">{currentTopic.icon}</span>
                    <span className="bg-emerald-900/50 text-emerald-400 px-3 py-1 rounded-full text-sm font-mono">
                      {currentTopic.category}
                    </span>
                  </div>
                  <p className="text-xl font-bold text-white leading-relaxed">
                    {currentTopic.question}
                  </p>
                </div>
              ) : (
                <div className="bg-gray-800 border border-gray-700 rounded-2xl p-6 text-center text-gray-500">
                  <Code size={48} className="mx-auto mb-2 opacity-50" />
                  <p>ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„</p>
                </div>
              )}

              <button
                onClick={getRandomTopic}
                className="w-full bg-emerald-600 text-white rounded-xl py-4 font-bold flex items-center justify-center gap-2 hover:bg-emerald-500 transition-colors"
              >
                <Shuffle size={20} />
                {currentTopic ? 'git pull --random' : 'ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ'}
              </button>

              {/* Category Buttons */}
              <div className="space-y-2">
                <p className="text-sm text-gray-500 font-mono">// ã‚«ãƒ†ã‚´ãƒªã‹ã‚‰é¸æŠ</p>
                <div className="flex flex-wrap gap-2">
                  {topics.map((topic) => (
                    <button
                      key={topic.category}
                      onClick={() => {
                        const randomIndex = Math.floor(Math.random() * topic.questions.length);
                        setCurrentTopic({
                          category: topic.category,
                          icon: topic.icon,
                          question: topic.questions[randomIndex],
                        });
                      }}
                      className="px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-300 hover:border-emerald-500 hover:text-emerald-400 transition-colors flex items-center gap-1"
                    >
                      <span>{topic.icon}</span>
                      {topic.category}
                    </button>
                  ))}
                </div>
              </div>
            </div>
          )}

          {activeTab === 'mission' && (
            <div className="space-y-4">
              <div className="flex items-center justify-between">
                <h2 className="text-lg font-bold text-white font-mono flex items-center gap-2">
                  <Target size={20} className="text-amber-400" />
                  ãƒŸãƒƒã‚·ãƒ§ãƒ³
                </h2>
                <span className="text-sm text-gray-400 font-mono">
                  {completedMissions.length}/{missions.length} complete
                </span>
              </div>

              {currentMission ? (
                <div className="bg-gradient-to-br from-amber-900/50 to-orange-900/50 border border-amber-500/50 rounded-2xl p-6 shadow-lg shadow-amber-500/10">
                  <div className="text-4xl mb-3">{currentMission.icon}</div>
                  <p className="text-xl font-bold text-white">{currentMission.text}</p>
                  <div className="flex items-center gap-1 mt-3 text-amber-400">
                    <Star size={16} />
                    <span className="font-mono">{currentMission.points} points</span>
                  </div>
                </div>
              ) : (
                <div className="bg-gray-800 border border-emerald-500 rounded-2xl p-6 text-center">
                  <Trophy className="mx-auto text-emerald-400 mb-2" size={48} />
                  <p className="text-emerald-400 font-bold">å…¨ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆï¼ğŸ‰</p>
                  <p className="text-gray-400 text-sm mt-1">ã‚ãªãŸã¯ç«‹æ´¾ãªã‚³ãƒŸãƒ¥åŠ›ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™</p>
                </div>
              )}

              <div className="flex gap-2">
                <button
                  onClick={getRandomMission}
                  className="flex-1 bg-gray-800 border border-gray-700 text-gray-300 rounded-xl py-3 font-medium flex items-center justify-center gap-2 hover:border-gray-500"
                >
                  <RefreshCw size={18} /> ã‚¹ã‚­ãƒƒãƒ—
                </button>
                <button
                  onClick={completeMission}
                  disabled={!currentMission}
                  className="flex-1 bg-amber-600 text-white rounded-xl py-3 font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-amber-500"
                >
                  é”æˆï¼âœ“
                </button>
              </div>

              {/* Progress */}
              <div className="bg-gray-800 border border-gray-700 rounded-xl p-4">
                <p className="text-sm text-gray-500 mb-3 font-mono">// å®Ÿç¸¾ä¸€è¦§</p>
                <div className="grid grid-cols-6 gap-2">
                  {missions.map((mission) => (
                    <div
                      key={mission.id}
                      className={`text-2xl text-center p-2 rounded-lg ${
                        completedMissions.includes(mission.id) 
                          ? 'bg-emerald-900/30 border border-emerald-500/50' 
                          : 'bg-gray-900 opacity-40'
                      }`}
                      title={mission.text}
                    >
                      {mission.icon}
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {activeTab === 'timer' && (
            <div className="space-y-4">
              <h2 className="text-lg font-bold text-white font-mono flex items-center gap-2">
                <Timer size={20} className="text-cyan-400" />
                ä¼šè©±ã‚¿ã‚¤ãƒãƒ¼
              </h2>
              <p className="text-gray-400 text-sm">
                setTimeout()ã§æ¬¡ã®ä¼šè©±ã¸ç§»å‹•ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¨­å®š
              </p>

              <div className="bg-gradient-to-br from-cyan-900/50 to-blue-900/50 border border-cyan-500/50 rounded-2xl p-8 text-center shadow-lg shadow-cyan-500/10">
                <p className={`text-6xl font-bold font-mono ${
                  timeLeft <= 30 && timerActive 
                    ? 'animate-pulse text-red-400' 
                    : 'text-white'
                }`}>
                  {formatTime(timeLeft)}
                </p>
                {timeLeft === 0 && (
                  <div className="mt-3 text-cyan-300 animate-bounce">
                    <p className="font-mono">âš¡ clearInterval() - æ¬¡ã®äººã¸ï¼</p>
                  </div>
                )}
              </div>

              {!timerActive ? (
                <>
                  <div className="space-y-2">
                    <p className="text-sm text-gray-500 font-mono">// duration ã‚’é¸æŠ</p>
                    <div className="flex gap-2">
                      {[60, 120, 180, 300].map((duration) => (
                        <button
                          key={duration}
                          onClick={() => {
                            setTimerDuration(duration);
                            setTimeLeft(duration);
                          }}
                          className={`flex-1 py-3 rounded-xl font-mono font-medium transition-all ${
                            timerDuration === duration
                              ? 'bg-cyan-600 text-white border border-cyan-400'
                              : 'bg-gray-800 text-gray-400 border border-gray-700 hover:border-gray-500'
                          }`}
                        >
                          {duration / 60}min
                        </button>
                      ))}
                    </div>
                  </div>
                  <button
                    onClick={startTimer}
                    className="w-full bg-cyan-600 text-white rounded-xl py-4 font-bold font-mono hover:bg-cyan-500 transition-colors"
                  >
                    setInterval() é–‹å§‹
                  </button>
                </>
              ) : (
                <div className="flex gap-2">
                  <button
                    onClick={() => setTimerActive(false)}
                    className="flex-1 bg-gray-800 border border-gray-700 text-gray-300 rounded-xl py-3 font-mono font-medium hover:border-gray-500"
                  >
                    pause()
                  </button>
                  <button
                    onClick={resetTimer}
                    className="flex-1 bg-red-900/50 border border-red-500/50 text-red-400 rounded-xl py-3 font-mono font-medium hover:bg-red-900"
                  >
                    reset()
                  </button>
                </div>
              )}

              <div className="bg-gray-800 border border-gray-700 rounded-xl p-4">
                <p className="text-sm text-gray-300">
                  <span className="text-cyan-400">ğŸ’¡ Pro tip:</span> ã‚¿ã‚¤ãƒãƒ¼ãŒã‚ã‚‹ã¨ã€Œæ™‚é–“ãªã®ã§ä»–ã®æ–¹ã¨ã‚‚ãŠè©±ã—ã—ã¦ãã¾ã™ã­ã€ã¨è‡ªç„¶ã«ç§»å‹•ã§ãã‚‹ã€‚ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢åŒå£«ãªã‚‰ã€Œã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸã®ã§ã€ã§é€šã˜ã‚‹ã‹ã‚‚ï¼Ÿ
                </p>
              </div>
            </div>
          )}
        </div>

        {/* Bottom Navigation */}
        <div className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-gray-900 border-t border-gray-700 flex">
          <TabButton id="home" icon={Terminal} label="Home" />
          <TabButton id="topics" icon={Code} label="Topics" />
          <TabButton id="mission" icon={Target} label="Mission" />
          <TabButton id="timer" icon={Timer} label="Timer" />
        </div>
      </div>
    </div>
  );
}
