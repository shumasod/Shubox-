import React, { useState, useEffect } from ‘react’;

const CuteOldmanAnimation = () => {
const emotions = [
{ text: ‘むむっ！’, color: ‘#f582ae’ },
{ text: ‘わしゃわしゃ’, color: ‘#f5a742’ },
{ text: ‘ほっほっほ’, color: ‘#82c0f5’ },
{ text: ‘うむうむ’, color: ‘#82f5a7’ },
{ text: ‘おやおや？’, color: ‘#f582d4’ },
{ text: ‘ふぉふぉふぉ’, color: ‘#f5d082’ }
];

const [currentEmotion, setCurrentEmotion] = useState(0);
const [isClicked, setIsClicked] = useState(false);
const [isHovered, setIsHovered] = useState(false);

useEffect(() => {
const interval = setInterval(() => {
if (!isClicked) {
setCurrentEmotion((prev) => (prev + 1) % emotions.length);
}
}, 4000);

```
return () => clearInterval(interval);
```

}, [isClicked, emotions.length]);

const handleClick = () => {
setIsClicked(true);
setCurrentEmotion((prev) => (prev + 1) % emotions.length);

```
setTimeout(() => {
  setIsClicked(false);
}, 500);
```

};

return (
<div className="w-full min-h-screen flex justify-center items-center bg-gradient-to-br from-[#fef6e4] to-[#f9f0d9] overflow-hidden p-4">
<div className="relative w-[min(300px,80vw)] aspect-square">
{/* 感情テキスト */}
<div
className=“absolute -top-16 left-1/2 -translate-x-1/2 whitespace-nowrap pointer-events-none z-20”
style={{
fontFamily: “‘M PLUS Rounded 1c’, sans-serif”,
fontSize: ‘clamp(1.5rem, 5vw, 2rem)’,
fontWeight: 700,
color: emotions[currentEmotion].color,
textShadow: ‘2px 2px 4px rgba(0, 0, 0, 0.1), 0 0 8px rgba(245, 130, 174, 0.3)’,
animation: ‘textBounce 2s ease-in-out infinite’
}}
>
{emotions[currentEmotion].text}
</div>

```
    {/* おじいさんコンテナ */}
    <button
      className={`relative w-full h-full cursor-pointer focus:outline-none focus-visible:ring-4 focus-visible:ring-pink-300 rounded-full transition-all duration-300 ${
        isClicked ? 'scale-95' : isHovered ? 'scale-105' : 'scale-100'
      }`}
      onClick={handleClick}
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
      aria-label={`感情を表現するかわいいおじいさん。現在の感情: ${emotions[currentEmotion].text}`}
      style={{
        filter: 'drop-shadow(0 15px 25px rgba(0, 0, 0, 0.1))'
      }}
    >
      {/* 顔 */}
      <div 
        className="absolute w-full h-full rounded-full flex justify-center items-center overflow-hidden"
        style={{
          background: 'radial-gradient(circle at 30% 30%, #f8e1c6 0%, #f5d7b3 100%)',
          animation: isHovered ? 'wobble 1s ease-in-out infinite' : 'wobble 2s ease-in-out infinite'
        }}
      >
        {/* 顔の影 */}
        <div 
          className="absolute w-[70%] h-[30%] rounded-full bottom-[10%] left-[15%]"
          style={{
            background: 'rgba(0, 0, 0, 0.05)',
            filter: 'blur(8px)'
          }}
        />

        {/* 左目 */}
        <div 
          className="absolute w-[13.33%] h-[13.33%] bg-white rounded-full top-[26.67%] left-[20%] z-10"
          style={{
            boxShadow: 'inset 0 2px 4px rgba(0, 0, 0, 0.1)',
            animation: 'eyeFollowLeft 4s ease-in-out infinite'
          }}
        >
          <div 
            className="absolute w-1/2 h-1/2 rounded-full top-1/4 left-1/4"
            style={{
              background: 'radial-gradient(circle, #4a4a4a 40%, #2a2a2a 100%)',
              animation: 'blink 3s ease-in-out infinite'
            }}
          />
        </div>

        {/* 右目 */}
        <div 
          className="absolute w-[13.33%] h-[13.33%] bg-white rounded-full top-[26.67%] right-[20%] z-10"
          style={{
            boxShadow: 'inset 0 2px 4px rgba(0, 0, 0, 0.1)',
            animation: 'eyeFollowRight 4s ease-in-out infinite'
          }}
        >
          <div 
            className="absolute w-1/2 h-1/2 rounded-full top-1/4 left-1/4"
            style={{
              background: 'radial-gradient(circle, #4a4a4a 40%, #2a2a2a 100%)',
              animation: 'blink 3s ease-in-out infinite'
            }}
          />
        </div>

        {/* 左頬 */}
        <div 
          className="absolute w-[10%] h-[6.67%] rounded-full top-[43.33%] left-[16.67%] z-[1]"
          style={{
            background: 'radial-gradient(circle, #f8a5c2 0%, transparent 70%)',
            opacity: 0.8,
            animation: 'blush 2s ease-in-out infinite'
          }}
        />

        {/* 右頬 */}
        <div 
          className="absolute w-[10%] h-[6.67%] rounded-full top-[43.33%] right-[16.67%] z-[1]"
          style={{
            background: 'radial-gradient(circle, #f8a5c2 0%, transparent 70%)',
            opacity: 0.8,
            animation: 'blush 2s ease-in-out infinite'
          }}
        />

        {/* ひげ */}
        <div 
          className="absolute w-[40%] h-[6.67%] rounded-xl bottom-[36.67%] z-10"
          style={{
            background: 'linear-gradient(to bottom, #e0e0e0 0%, #d5d5d5 100%)',
            boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)'
          }}
        >
          <div 
            className="absolute w-full h-[2px] bg-[#ccc] top-[30%] rounded-sm"
          />
        </div>

        {/* 口 */}
        <div 
          className="absolute w-[26.67%] h-[13.33%] bottom-[23.33%] z-10"
          style={{
            border: '2.5px solid #4a4a4a',
            borderBottomLeftRadius: '40px',
            borderBottomRightRadius: '40px',
            borderTop: 'none',
            animation: 'mouthMove 2s ease-in-out infinite'
          }}
        />
      </div>
    </button>

    {/* 操作ヒント */}
    <div className="absolute -bottom-12 left-1/2 -translate-x-1/2 text-center text-sm text-gray-600 whitespace-nowrap">
      クリックで感情を変更
    </div>
  </div>

  {/* CSS アニメーション */}
  <style jsx>{`
    @keyframes wobble {
      0%, 100% { transform: rotate(-3deg) scale(1); }
      50% { transform: rotate(3deg) scale(1.02); }
    }

    @keyframes blink {
      0%, 90%, 100% { transform: scale(1); }
      95% { transform: scale(0.1, 0.05); }
    }

    @keyframes eyeFollowLeft {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-2px); }
      75% { transform: translateX(2px); }
    }

    @keyframes eyeFollowRight {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(2px); }
      75% { transform: translateX(-2px); }
    }

    @keyframes mouthMove {
      0%, 100% { transform: scaleY(1) scaleX(1); }
      50% { transform: scaleY(0.7) scaleX(1.1); }
    }

    @keyframes blush {
      0%, 100% { opacity: 0.6; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.1); }
    }

    @keyframes textBounce {
      0%, 100% { 
        opacity: 0; 
        transform: translate(-50%, 20px) scale(0.8); 
      }
      10%, 90% { 
        opacity: 1; 
        transform: translate(-50%, -10px) scale(1.1); 
      }
      50% {
        transform: translate(-50%, -15px) scale(1);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
      }
    }
  `}</style>
</div>
```

);
};

export default CuteOldmanAnimation;